(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{226:function(t,s,a){t.exports=a.p+"assets/img/motionevent.b9f2d398.png"},227:function(t,s,a){t.exports=a.p+"assets/img/motionsensor.a23c1c95.gif"},228:function(t,s,a){t.exports=a.p+"assets/img/fivesensors.b6e02a82.jpg"},229:function(t,s,a){t.exports=a.p+"assets/img/motionpluggedin.5e24a6f0.jpg"},230:function(t,s,a){t.exports=a.p+"assets/img/motioncable.b1a9e035.jpg"},231:function(t,s,a){t.exports=a.p+"assets/img/motionsensor.f8c25acb.jpg"},232:function(t,s,a){t.exports=a.p+"assets/img/lightLevels.db7a74bd.png"},233:function(t,s,a){t.exports=a.p+"assets/img/foursensors.d75dff02.jpg"},234:function(t,s,a){t.exports=a.p+"assets/img/lightpluggedin.1d240b04.jpg"},235:function(t,s,a){t.exports=a.p+"assets/img/lightplug.67de6c89.jpg"},236:function(t,s,a){t.exports=a.p+"assets/img/lightsensor.0026483b.jpg"},237:function(t,s,a){t.exports=a.p+"assets/img/sensorevents.2b52197a.png"},238:function(t,s,a){t.exports=a.p+"assets/img/threesensors.6b534937.jpg"},239:function(t,s,a){t.exports=a.p+"assets/img/dustpluggedin.ebcf94bc.jpg"},240:function(t,s,a){t.exports=a.p+"assets/img/dustcable.a6213793.jpg"},241:function(t,s,a){t.exports=a.p+"assets/img/dustsensor.6a472e72.jpg"},242:function(t,s,a){t.exports=a.p+"assets/img/callFunc.9454f4ce.png"},243:function(t,s,a){t.exports=a.p+"assets/img/newFunc.2a330909.png"},244:function(t,s,a){t.exports=a.p+"assets/img/fourvariables.293804f9.png"},245:function(t,s,a){t.exports=a.p+"assets/img/twolibraries.5434e515.png"},246:function(t,s,a){t.exports=a.p+"assets/img/sgp30lib.06f49982.png"},247:function(t,s,a){t.exports=a.p+"assets/img/gasandtemp.b2773a00.jpg"},248:function(t,s,a){t.exports=a.p+"assets/img/gasandelectron.9e5a31ef.jpg"},249:function(t,s,a){t.exports=a.p+"assets/img/gaspluggedin.69ef123e.jpg"},250:function(t,s,a){t.exports=a.p+"assets/img/gassensor.467d7d3b.jpg"},251:function(t,s,a){t.exports=a.p+"assets/img/variables.029467c9.png"},252:function(t,s,a){t.exports=a.p+"assets/img/funcsandvars.ec5623b7.png"},253:function(t,s,a){t.exports=a.p+"assets/img/dash.f7a0a0c8.png"},254:function(t,s,a){t.exports=a.p+"assets/img/console.508640a8.png"},255:function(t,s,a){t.exports=a.p+"assets/img/lightning.34844474.png"},256:function(t,s,a){t.exports=a.p+"assets/img/selecttoflash.e4855d19.png"},257:function(t,s,a){t.exports=a.p+"assets/img/deviceslist.908c0d63.png"},258:function(t,s,a){t.exports=a.p+"assets/img/devices.6a952842.png"},259:function(t,s,a){t.exports=a.p+"assets/img/libraryadded.c445b255.png"},260:function(t,s,a){t.exports=a.p+"assets/img/confirm.bb674200.png"},261:function(t,s,a){t.exports=a.p+"assets/img/whichapp.20c29388.png"},262:function(t,s,a){t.exports=a.p+"assets/img/sht31.b92e2fc7.png"},263:function(t,s,a){t.exports=a.p+"assets/img/librarysearch.b3967ec5.png"},264:function(t,s,a){t.exports=a.p+"assets/img/libraries.6555812e.png"},265:function(t,s,a){t.exports=a.p+"assets/img/tempandelectron.965c1452.jpg"},266:function(t,s,a){t.exports=a.p+"assets/img/temppluggedin.4c175466.jpg"},267:function(t,s,a){t.exports=a.p+"assets/img/tempwire.c02af73b.jpg"},268:function(t,s,a){t.exports=a.p+"assets/img/temphusensor.9662c144.jpg"},269:function(t,s,a){t.exports=a.p+"assets/img/grovesensors.cd98ca73.jpg"},270:function(t,s,a){t.exports=a.p+"assets/img/electroninslot.df3fe1e5.jpg"},271:function(t,s,a){t.exports=a.p+"assets/img/iaqmpcb.01c0131d.jpg"},272:function(t,s,a){t.exports=a.p+"assets/img/projectnamed.c7cf880b.png"},273:function(t,s,a){t.exports=a.p+"assets/img/projectname.ccb604b4.png"},274:function(t,s,a){t.exports=a.p+"assets/img/newproject.68e3a433.png"},275:function(t,s,a){t.exports=a.p+"assets/img/particle-home.a4565b9c.png"},276:function(t,s,a){t.exports=a.p+"assets/img/login.612397f2.png"},304:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"chapter-2-reading-from-sensors-exploring-the-device-cloud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chapter-2-reading-from-sensors-exploring-the-device-cloud","aria-hidden":"true"}},[this._v("#")]),this._v(" Chapter 2: Reading from sensors & exploring the Device Cloud")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("Project Goal")])]),a("th",[t._v("Start programming your Electron, read sensor data, and leverage the device cloud.")])])]),a("tbody",[a("tr",[a("td",[a("strong",[t._v("What you’ll learn")])]),a("td",[t._v("How to interact with sensors; Using Particle variables and cloud functions.")])]),a("tr",[a("td",[a("strong",[t._v("Tools you’ll need")])]),a("td",[t._v("build.particle.io, console.particle.io, the Particle CLI, a Particle Electron and Continental IAQM Device")])]),a("tr",[a("td",[a("strong",[t._v("Time needed to complete")])]),a("td",[t._v("60 minutes")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"create-a-new-project-in-the-web-ide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-project-in-the-web-ide","aria-hidden":"true"}},[this._v("#")]),this._v(" Create a new project in the Web IDE")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(276),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(275),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("When navigating to the Web IDE (Build), the first thing you'll see is an empty editor window for a new project and a prompt to give that project a name.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(274),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v('In the Current App textbox, give your app the name "IAQMSensors" and hit enter.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(273),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("Once you've given your project a name, you're ready to code!")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(272),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"the-setup-and-loop-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-setup-and-loop-functions","aria-hidden":"true"}},[this._v("#")]),this._v(" The "),s("code",[this._v("setup()")]),this._v(" and "),s("code",[this._v("loop()")]),this._v(" functions")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Every Particle application "),s("em",[this._v("must")]),this._v(' have two functions in the main file (sometimes called a "sketch"): '),s("code",[this._v("setup()")]),this._v(" and "),s("code",[this._v("loop()")]),this._v(". Both of these functions are called by the Particle Device OS.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("True to its name, "),s("code",[this._v("setup()")]),this._v(" runs only only once when the device starts up and is used for initializing buttons, sensors and other things needed to get your project ready to execute.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("loop()")]),this._v(", on the other hand, runs over and over again as long as your firmware is running on the device. When the function is called by the device OS, the code inside executes sequentially until it reaches the closing brace of the function, before being called again.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("While the speed at which the "),s("code",[this._v("loop()")]),this._v(" function executes is determined by the specific hardware and the time needed to execute the use code you've written in the function, it's important to know that, much of the time, this function will run very fast.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The bulk of your program, from state management, handling user input, reading from sensors and more will take place inside of the "),s("code",[this._v("loop()")]),this._v(" function. It can take a bit of getting used to if you're not familiar with this style of development, but once you become comfortable, you'll enjoy the power this control provides you as a firmware developer.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"setting-up-the-iaqm-board"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-iaqm-board","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting up the IAQM Board")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("The project box you received contains a custom PCB with a slot for a Particle Electron and several Grove-compatible breakouts for Digital and Analog pins, as well as the I2C bus on the Electron.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(271),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("Plug your Electron into the slot on the board, making sure to line up the device to the silkscreen outline. Leave the Electron plugged into your computer via USB, and the LiPo battery connected.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(270),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Next, make sure you have the five Grove sensors we'll need for this lab. They are:")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("SHT31 Temperature & Humidity Sensor")]),s("li",[this._v("SGP30 VOC and eCO2 Gas Sensor")]),s("li",[this._v("Dust Sensor")]),s("li",[this._v("Light sensor")]),s("li",[this._v("PIR Motion Sensor")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(269),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"working-with-the-temperature-humidity-sensor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-the-temperature-humidity-sensor","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with the Temperature & Humidity Sensor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"add-the-sht31-library"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-the-sht31-library","aria-hidden":"true"}},[this._v("#")]),this._v(" Add the SHT31 Library")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Find the Temperature & Humidity Sensor.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(268),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("The bag includes a sensor and a four-wire cable for connecting the sensor to the board. Plug one side of the cable into the slot on the sensor PCB.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(267),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v('Plug the other end into any of the white connectors with an "I2C" label next to it.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(266),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(265),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(264),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v('Type "SHT31" into the search box. The library we\'ll be using should match that name exactly.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(263),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v('Click on the library name in search results, which will bring up the description page and source code. Click the "Include in project" button.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(262),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"7"}},[s("li",[this._v('Select your "IAQMSensors" project.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(261),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"8"}},[s("li",[this._v('Click "Confirm."')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(260),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"9"}},[s("li",[this._v("The library will be included in your app, which you'll see in the sidebar. Also notice that an #include statement was added for the header file for the library.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(259),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"interact-with-the-sensor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interact-with-the-sensor","aria-hidden":"true"}},[this._v("#")]),this._v(" Interact with the sensor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("First, we'll need to add a global variable to hold the sensor class object. Add the following to the top of your program, outside of the "),s("code",[this._v("setup")]),this._v(" and "),s("code",[this._v("loop")]),this._v(" methods.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("SHT31 sht31 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("SHT31")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("Let's also create two variables to hold the temperature and humidity, just below that object.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Now, we'll call the "),s("code",[this._v("begin")]),this._v(" class method to initialize the sensor for reading. Add the following to your "),s("code",[this._v("setup")]),this._v(" function.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[this._v("sht31"),s("span",{attrs:{class:"token punctuation"}},[this._v(".")]),s("span",{attrs:{class:"token function"}},[this._v("begin")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("We're ready to read from the sensor. In the "),s("code",[this._v("loop")]),this._v(" function, add the following two lines to set the temp and humidity variables.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("currentTemperature "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getTemperature")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1.8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("32.00")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncurrentHumidity "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getHumidity")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),s("p",[this._v("The "),s("code",[this._v("getTemperature")]),this._v(" method returns the temp as a Celcius value, so we multiply that value by 1.8 and add 32 to convert it to Fahrenheit. Both methods also return float values, so we'll do a bit of math to round them and cast each value to an integer.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("As stated above, the loop function runs very fast. So fast, in fact, that if your loop only contained the two statements to check the sensor value, the values would be updated faster than you can use them. One of the ways we can manage this is with the delay() function, which accepts a value that represents the number of milliseconds to pause before continuing program execution. Add the following to the end of the "),s("code",[this._v("loop")]),this._v(" function.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("delay")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token number"}},[this._v("5000")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("We're getting sensor data now, but we don't have a way to read it, yet. Let's use our first Particle Device Cloud primitive and expose these as variables. The "),s("code",[this._v("Particle.variable")]),this._v(" method requires two parameters, a String representing the name of the variable and the global variable to return whenever the variable is requested from the device cloud. Variables must be declared in the "),s("code",[this._v("setup")]),this._v(" function, so add the following two lines to the end.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tempF"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nParticle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"humidity"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"7"}},[s("li",[this._v("You full code file should now look like this.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("<SHT31.h>")])]),t._v("\n\nSHT31 sht31 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("SHT31")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("setup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("begin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tempF"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"humidity"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("loop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  currentTemperature "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getTemperature")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1.8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("32.00")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  currentHumidity "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getHumidity")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token function"}},[t._v("delay")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("5000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"7"}},[s("li",[this._v('To see your first code in action, we need to install the code on a device. This is often referred to as "flashing firmware". In the bottom-left corner of the Web IDE, click on the cross-hairs icon to open the devices panel.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(258),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"8"}},[s("li",[this._v("The Devices panel shows a list of all the Particle devices you own, organized by type. Online devices will include a breathing cyan dot next to the name, as well.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(257),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"9"}},[s("li",[this._v("To choose a device to flash, click the start next to the name of the device you want to flash.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(256),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"10"}},[s("li",[this._v("Now, click the flash lightning bolt icon in the top-left to flash the firmware to your device.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(255),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"view-readings-in-the-particle-console"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#view-readings-in-the-particle-console","aria-hidden":"true"}},[this._v("#")]),this._v(" View Readings in the Particle Console")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(254),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("The device dashboard is your command-center for your Electron. It shows an event log, device diagnostics and more.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(253),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("In the right-hand side of the screen, you'll see a section for Device Cloud functions and variables you device has set up. Your two variables should show up here.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(252),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v('Click the "Get" button next to each variable and you should see the latest temperature and humidity readings from your Electron.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(251),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"working-with-the-gas-sensor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-the-gas-sensor","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with the Gas Sensor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"add-the-sgp30-library"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-the-sgp30-library","aria-hidden":"true"}},[this._v("#")]),this._v(" Add the SGP30 Library")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Find the Gas Sensor.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(250),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("The bag includes a sensor and a four-wire cable for connecting the sensor to the board. Plug one side of the cable into the slot on the sensor PCB.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(249),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v('Plug the other end into any of the white connectors with an "I2C" label next to it.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(248),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(247),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[s("p",[this._v("Just like with the Temp and humidity sensor, we can read the gas sensor with a library. Open your project at build.particle.io and open the libraries tab.")])]),s("li",[s("p",[this._v('Type "SGP30" into the search box. The Library we\'re looking for is named "SensirionSGP30."')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(246),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v('Click the library name, then "Include in Project." Select your current project and click "Confirm." You should now see two libraries included in your project.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(245),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"interacting-with-the-device"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interacting-with-the-device","aria-hidden":"true"}},[this._v("#")]),this._v(" Interacting with the device")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("As we did with the temp sensor, we need to initialize a class object to interface with our sensor. Add the following below the object initialization code for the temp sensor.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[this._v("SensirionSGP30 sgp"),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Next, we'll initialize the sensor in our "),s("code",[this._v("setup")]),this._v(" function.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[this._v("sgp"),s("span",{attrs:{class:"token punctuation"}},[this._v(".")]),s("span",{attrs:{class:"token function"}},[this._v("begin")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("Then, in "),s("code",[this._v("loop")]),this._v(", we can take a reading. This library works in a slightly different fashion from the temp and humidity sensor in that both values are fetched by a single method call "),s("code",[this._v("IAQmeasure")]),this._v(", which places the readings into class variables. If the measurement is successful, the method will return "),s("code",[this._v("true")]),this._v(", so we'll check it before assigning the readings into the global variables.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("IAQmeasure")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  currentTVOC "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  currentCO2eq "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eCO2"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("Finally, to make these values accessible to the Device Cloud, we'll add two more "),s("code",[this._v("Particle.Variable")]),this._v(" calls in "),s("code",[this._v("setup")]),this._v(".")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tvoc"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nParticle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"eCO2"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("<SensirionSGP30.h>")])]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("<SHT31.h>")])]),t._v("\n\n\nSHT31 sht31 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("SHT31")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSensirionSGP30 sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("setup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("begin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("begin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tempF"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"humidity"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tvoc"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"eCO2"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("loop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  currentTemperature "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getTemperature")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1.8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("32.00")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  currentHumidity "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getHumidity")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("IAQmeasure")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    currentTVOC "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    currentCO2eq "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eCO2"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{attrs:{class:"token function"}},[t._v("delay")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("5000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v('Flash the new firmware to you device and go back to your device dashboard in the Console. Click the refresh icon in the variables list and you should see two new variables. Click "Get" to see the latest readings.')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(244),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"adding-a-cloud-function"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-cloud-function","aria-hidden":"true"}},[this._v("#")]),this._v(" Adding a Cloud Function")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("So far, we've worked exclusively with Particle variables, which allow us to read current sensor values. Let's add a function that will allow us to trigger sensor readings on-demand. Along the way, we're going to clean up the existing code a bit. Start by adding the following to the top of your file, just after the "),s("code",[this._v("#include")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token macro property"}},[this._v("#"),s("span",{attrs:{class:"token directive keyword"}},[this._v("define")]),this._v(" SENSOR_CHECK_INTERVAL 10000")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),s("p",[s("code",[this._v("#define")]),this._v(" is a text substitution pre-processor directive. It tells the compiler to replace every instance of a text value (on the left) with another value (on the right). In the case above, anywhere we use "),s("code",[this._v("SENSOR_CHECK_INTERVAL")]),this._v(" will be replaced with the number "),s("code",[this._v("10000")]),this._v(". It's like using a constant, except we're not using any memory in allocating a variable for the program!")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("Next, let's add a new variable we can use to track the last time we checked the sensors. Add the following line right after our other variables.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Now, lets add a function for checking our sensors, since we'll end up needing this in a few places. Just before the "),s("code",[this._v("setup")]),this._v(" function, add a new "),s("code",[this._v("checkSensors")]),this._v(" function.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  currentTemperature "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getTemperature")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1.8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("32.00")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  currentHumidity "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getHumidity")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("IAQmeasure")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    currentTVOC "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    currentCO2eq "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eCO2"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("Next, we need to clean up our loop a bit. We were using "),s("code",[this._v("delay")]),this._v(" previously to pause execution between checks, but this isn't ideal because it blocks program execution. A better way to manage delays between actions in an embedded system is to use "),s("code",[this._v("millis()")]),this._v(" and timing variables, like the ones we added earlier. "),s("code",[this._v("millis()")]),this._v(" returns the number of milliseconds that have elapsed since your program started running, and it can be very useful when you need to manage time intervals.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Change your "),s("code",[this._v("loop")]),this._v(" to look like the following:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("loop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("millis")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" SENSOR_CHECK_INTERVAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("millis")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("if")]),this._v(" statement is checking to see how long it's been since we took a temperature reading. Basically, if 10 seconds have elapsed (our "),s("code",[this._v("SENSOR_CHECK_INTERVAL")]),this._v(" value), we'll set the "),s("code",[this._v("lastSensorCheck")]),this._v(" to a new value and then check the temperature sensor.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("Since our first sensor check won't happen in the first 10 seconds, we can add an initial check to our "),s("code",[this._v("setup")]),this._v(".")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("setup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("begin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("begin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tempF"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"humidity"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tvoc"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"eCO2"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("Now we can add our cloud function. "),s("code",[this._v("Particle.function")]),this._v(" expects a name and a local function that will handle calls from the Device Cloud. Add the following to your "),s("code",[this._v("setup")]),this._v(" function.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"checkSensors"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" checkSensorsHandler"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",{attrs:{start:"7"}},[a("li",[t._v("And, finally, we'll add the function. All functions to be used as cloud functions "),a("em",[t._v("MUST")]),t._v(" return an "),a("code",[t._v("int")]),t._v(" and take a single "),a("code",[t._v("String")]),t._v(" parameter, which is why the signature is different than our "),a("code",[t._v("checkSensors")]),t._v(" function.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("checkSensorsHandler")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String command"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),s("p",[this._v("For the sake of clarity, we've wrapped the existing "),s("code",[this._v("checkTemp")]),this._v(" function in our cloud function handler. How could you refactor this so we've only have one helper function for local calls and the device cloud?")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("<SensirionSGP30.h>")])]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("<SHT31.h>")])]),t._v("\n\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" SENSOR_CHECK_INTERVAL 10000")]),t._v("\n\nSHT31 sht31 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("SHT31")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSensirionSGP30 sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  currentTemperature "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getTemperature")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1.8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("32.00")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  currentHumidity "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("round")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getHumidity")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("IAQmeasure")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    currentTVOC "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    currentCO2eq "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eCO2"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("checkSensorsHandler")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String command"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("setup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sht31"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("begin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  sgp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("begin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tempF"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"humidity"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"tvoc"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("variable")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"eCO2"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"checkSensors"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" checkSensorsHandler"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("loop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("millis")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" SENSOR_CHECK_INTERVAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("millis")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"8"}},[s("li",[this._v("Now, flash the firmware to your device and head back to the console. Refresh your device screen and you should now see your "),s("code",[this._v("checkSensors")]),this._v(" function.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(243),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"9"}},[s("li",[this._v("Click on "),s("code",[this._v("Call")]),this._v(" to execute the function. Then, click "),s("code",[this._v("Get")]),this._v(" next to the "),s("code",[this._v("tempF")]),this._v(" variable to see the result.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(242),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"working-with-the-dust-sensor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-the-dust-sensor","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with the Dust Sensor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The next sensor up is the Dust sensor. The included sensor uses a particle counting method to measure dust concentration and connects to a digital pin on the Electron. Once we connect this sensor, we'll add a "),s("code",[this._v("Particle.publish")]),this._v(" to pass all sensor readings along to the Device cloud each time they are collected.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Find the Dust sensor.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(241),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("The bag includes a sensor and a three-wire cable for connecting the sensor to the board. Plug the larger side of the cable into the slot on the sensor PCB.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(240),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Plug the other end into the white connector with the "),s("code",[this._v("A1")]),this._v(" label next to it.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(239),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(238),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"interacting-with-the-device-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interacting-with-the-device-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Interacting with the device")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Unlike our previous two sensors, the dust sensor is not I2C based. We interact with it on a single digital pin, and need to write a bit more code to take a reading. Let's start by creating a new "),s("code",[this._v("#define")]),this._v(" for the digital pin.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token macro property"}},[this._v("#"),s("span",{attrs:{class:"token directive keyword"}},[this._v("define")]),this._v(" DUST_SENSOR_PIN A1")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("Next, create some global variables to hold various readings. Add these three to the top of the file.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" duration"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" lowPulseOccupancy"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("float")]),t._v(" ratio"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("float")]),t._v(" concentration"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Before we use a digital or analog pin, we need to designate it as an input or output so that our Electron knows how to properly configure the pin. Add the following line to "),s("code",[this._v("setup")]),this._v(" to designate the sensor pin as an input.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("pinMode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DUST_SENSOR_PIN"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" INPUT"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("duration "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("pulseIn")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DUST_SENSOR_PIN"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LOW"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlowPulseOccupancy "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lowPulseOccupancy "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" duration"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("Next, we'll call a new function "),s("code",[this._v("checkDust")]),this._v(" after the interval (10 sec) elapses. Your "),s("code",[this._v("loop")]),this._v(" should now look like this:")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("loop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  duration "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("pulseIn")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DUST_SENSOR_PIN"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LOW"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  lowPulseOccupancy "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lowPulseOccupancy "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" duration"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("millis")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" SENSOR_CHECK_INTERVAL"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    lastSensorCheck "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("millis")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("checkSensors")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("checkDust")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("checkDust")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ratio "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lowPulseOccupancy"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SENSOR_CHECK_INTERVAL"),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token number"}},[t._v("10.0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  concentration "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1.1")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("pow")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ratio"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3.8")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("pow")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ratio"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),a("span",{attrs:{class:"token number"}},[t._v("520")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" ratio "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.62")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  lowPulseOccupancy "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"publish-a-particle-event-with-sensor-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#publish-a-particle-event-with-sensor-data","aria-hidden":"true"}},[this._v("#")]),this._v(" Publish a Particle event with sensor data")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Start by creating a new function called "),s("code",[this._v("fireSensorEvent")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("fireSensorEvent")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("In order to make it easier for us to process sensor data in the next lab, we're going to create a JSON object that holds all of our sensor values. Let's create a new "),s("code",[this._v("String")]),this._v(" object and assemble that object inside of the new function. Then, we'll call "),s("code",[this._v("Particle.publish")]),this._v(" to send an event along to the Particle device cloud.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("String payload "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"{\\"temp\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"humidity\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"tvoc\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"co2eq\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"dust\\": {\\"lpo\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lowPulseOccupancy"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"ratio\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ratio"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"concentration\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("concentration"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"}"')]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"}"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nParticle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("publish")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"device_sensors"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MY_DEVICES"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("To call this function, add it to the end of the loop, just after "),s("code",[this._v("checkDust")]),this._v(".")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("fireSensorEvent")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("Flash the firmware to your device. Once loaded, navigate back to your device dashboard in the Console. Your new event should show up in the event stream after a few seconds.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(237),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"working-with-the-light-sensor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-the-light-sensor","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with the Light Sensor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Find the Light sensor.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(236),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("The bag includes a sensor and a four-wire cable for connecting the sensor to the board. Plug the larger side of the cable into the slot on the sensor PCB.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(235),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Plug the other end into the white connector with the "),s("code",[this._v("A0")]),this._v(" label next to it.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(234),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(233),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"interacting-with-the-device-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interacting-with-the-device-3","aria-hidden":"true"}},[this._v("#")]),this._v(" Interacting with the device")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Start by adding a new "),s("code",[this._v("#define")]),this._v(" mapping for our light sensor at the top of your code.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token macro property"}},[this._v("#"),s("span",{attrs:{class:"token directive keyword"}},[this._v("define")]),this._v(" LIGHT_SENSOR_PIN A0")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("Next, add a "),s("code",[this._v("pinMode")]),this._v(" mapping in "),s("code",[this._v("setup")]),this._v(".")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("pinMode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LIGHT_SENSOR_PIN"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" INPUT"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("As we've done previously, we'll also need a global variable to hold the light level.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("double")]),this._v(" currentLightLevel"),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",{attrs:{start:"4"}},[a("li",[t._v("In the "),a("code",[t._v("checkSensors")]),t._v(" function, add a couple of lines to read the analog value from the sensor, and map that value (which could be between "),a("code",[t._v("0")]),t._v(" and "),a("code",[t._v("4095")]),t._v(") to a value between "),a("code",[t._v("0")]),t._v(" and "),a("code",[t._v("100")]),t._v(" to loosely represent a percentage.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("double")]),t._v(" lightAnalogVal "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("analogRead")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LIGHT_SENSOR_PIN"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncurrentLightLevel "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("map")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lightAnalogVal"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("4095.0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("100.0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("Finally, we'll add the light level to our event payload.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("String payload "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"{\\"temp\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"humidity\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"tvoc\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"co2eq\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"dust\\": {\\"lpo\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lowPulseOccupancy"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"ratio\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ratio"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"concentration\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("concentration"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"}"')]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"lightLevel\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentLightLevel"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"}"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("Flash the firmware and navigate back to the console. Shine a light towards the sensor and watch the value change.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(232),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"working-with-the-motion-sensor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-the-motion-sensor","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with the Motion Sensor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Find the Motion sensor.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(231),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("The bag includes a sensor and a four-wire cable for connecting the sensor to the board. Plug the larger side of the cable into the slot on the sensor PCB.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(230),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Plug the other end into the white connector with the "),s("code",[this._v("D2")]),this._v(" label next to it.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(229),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(228),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"interacting-with-the-device-triggering-an-event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interacting-with-the-device-triggering-an-event","aria-hidden":"true"}},[this._v("#")]),this._v(" Interacting with the device & triggering an event")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("As with the previous two devices, we'll add a new "),s("code",[this._v("#define")]),this._v(" for the pin mapping.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token macro property"}},[this._v("#"),s("span",{attrs:{class:"token directive keyword"}},[this._v("define")]),this._v(" MOTION_SENSOR_PIN D2")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("And add a "),s("code",[this._v("pinMode")]),this._v(" initialization to the "),s("code",[this._v("setup")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("pinMode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MOTION_SENSOR_PIN"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" INPUT"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Next, we'll read from the sensor in the "),s("code",[this._v("loop")]),this._v(" function. Add the bottom, outside of the other "),s("code",[this._v("if")]),this._v(" statement, add the following.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("digitalRead")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MOTION_SENSOR_PIN"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Particle"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("publish")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"movement_detected"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("NULL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MY_DEVICES"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),a("p",[a("code",[t._v("digitalRead")]),t._v(" returns either a "),a("code",[t._v("LOW")]),t._v(" (0) value or a "),a("code",[t._v("HIGH")]),t._v(" (1). In the case of our motion sensor, "),a("code",[t._v("HIGH")]),t._v(" means that movement was detected, so we'll fire an event to the Device cloud.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"adding-the-last-motion-time-to-our-event-payload"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-the-last-motion-time-to-our-event-payload","aria-hidden":"true"}},[this._v("#")]),this._v(" Adding the last motion time to our event payload")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("We can also log the last time we detected motion and pass this along to our sensor payload. Start by adding a global variable at the top of the file.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("uint32_t")]),this._v(" lastMotionTime"),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("lastMotionTime "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Time"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("now")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("Finally, add the "),s("code",[this._v("lastMotionTime")]),this._v(" to our sensor payload.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("String payload "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"{\\"temp\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentTemperature"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"humidity\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentHumidity"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"tvoc\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentTVOC"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"co2eq\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentCO2eq"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"dust\\": {\\"lpo\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lowPulseOccupancy"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"ratio\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ratio"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"concentration\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("concentration"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"}"')]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"lightLevel\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentLightLevel"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('", \\"lastMotion\\":"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lastMotionTime"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"}"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("Flash the firmware to your device and re-open device dashboard in the console. Wave your hand over the sensor to trigger an event.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(227),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("When a new sensor event comes in, you'll also see the "),s("code",[this._v("lastMotion")]),this._v(" property included.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(226),alt:""}})])}],e=a(0),r=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),a("p",[t._v("In this session, we're going to explore the Particle ecosystem via an, Electron-powered IAQM Device with several sensors! If you get stuck at any point during this session, "),a("a",{attrs:{href:"https://go.particle.io/shared_apps/5b92ba65df6b76d72400179f",target:"_blank",rel:"noopener noreferrer"}},[t._v("click here for the completed, working source"),a("OutboundLink")],1),t._v(".")]),t._m(2),a("ol",[a("li",[t._v("Navigate to "),a("a",{attrs:{href:"http://build.particle.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("build.particle.io"),a("OutboundLink")],1),t._v(". You may need to log-in, if prompted.")])]),t._m(3),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Once you log-in, you may be directed to the Particle home page. If so, "),a("a",{attrs:{href:"https://build.particle.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("click here to navigate"),a("OutboundLink")],1),t._v(" back to Particle Build.")])]),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),a("p",[t._v("Before we dive into our first bit of code, a brief word about the two functions that were auto-populated into your new app. If you've done Arduino or Particle development before, you're already familiar with these and can skip ahead. If not, read on.")]),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),t._m(31),t._m(32),a("p",[t._v("Once connected, you're ready to start reading from this sensor!")]),t._m(33),a("ol",{attrs:{start:"4"}},[a("li",[t._v("Since the SHT31 temperature and humidity sensor is a common device, we can use a library to work with it. Navigate to your project at "),a("a",{attrs:{href:"https://build.particle.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("build.particle.io"),a("OutboundLink")],1),t._v(" and click on the bookmark icon to open the libraries tab.")])]),t._m(34),t._m(35),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),t._m(41),t._m(42),t._m(43),t._m(44),t._m(45),t._m(46),t._m(47),t._m(48),t._m(49),t._m(50),t._m(51),t._m(52),t._m(53),t._m(54),t._m(55),t._m(56),t._m(57),t._m(58),t._m(59),t._m(60),t._m(61),t._m(62),t._m(63),t._m(64),t._m(65),t._m(66),t._m(67),t._m(68),t._m(69),a("ol",[a("li",[t._v("Open a new browser tab and navigate to "),a("a",{attrs:{href:"https://console.particle.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("console.particle.io"),a("OutboundLink")],1),t._v(". Find your Electron and click on it's ID.")])]),t._m(70),t._m(71),t._m(72),t._m(73),t._m(74),t._m(75),t._m(76),a("p",[t._v("Congrats, you've configured your first sensor, and have successfully pushed it's data to the cloud. Now let's add the next sensor and explore more of the Particle Device Cloud.")]),t._m(77),t._m(78),t._m(79),t._m(80),t._m(81),t._m(82),t._m(83),t._m(84),a("p",[t._v("Once connected, you're ready to start reading from this sensor!")]),t._m(85),t._m(86),t._m(87),t._m(88),t._m(89),t._m(90),t._m(91),t._m(92),a("ol",{attrs:{start:"2"}},[a("li",[t._v("The Gas sensor reads two values, "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Volatile_organic_compound",target:"_blank",rel:"noopener noreferrer"}},[t._v("Total Volatile Organic Compounds"),a("OutboundLink")],1),t._v(" (TVOC) in parts per million (ppm) and "),a("a",{attrs:{href:"https://climatepolicyinfohub.eu/glossary/co2eq",target:"_blank",rel:"noopener noreferrer"}},[t._v("Carbon dioxide equivalent"),a("OutboundLink")],1),t._v(" (CO2eq) in parts per billion (ppb), both of which can be used to determine air quality. Let's create global variables to hold both readings. Add them right after our temp and humidity variables.")])]),t._m(93),t._m(94),t._m(95),t._m(96),t._m(97),t._m(98),t._m(99),a("p",[t._v("Your project code should now look like the following:")]),t._m(100),t._m(101),t._m(102),t._m(103),t._m(104),t._m(105),t._m(106),t._m(107),t._m(108),t._m(109),t._m(110),t._m(111),t._m(112),t._m(113),t._m(114),t._m(115),t._m(116),t._m(117),t._m(118),t._m(119),t._m(120),t._m(121),a("p",[t._v("Your firmware should now look like this.")]),t._m(122),t._m(123),t._m(124),t._m(125),t._m(126),a("p",[t._v("Let's move onto our next sensor.")]),t._m(127),t._m(128),t._m(129),t._m(130),t._m(131),t._m(132),t._m(133),t._m(134),a("p",[t._v("Once connected, you're ready to start reading from this sensor!")]),t._m(135),t._m(136),a("p",[t._v("The dust sensor returns a Particulate Matter (PM) level (dust concentration) using a method called Low Pulse Occupancy (LPO) time in a given time unit. LPO time is proportional to PM concentration. For more information on this sensor and how it works, "),a("a",{attrs:{href:"http://wiki.seeedstudio.com/Grove-Dust_Sensor/",target:"_blank",rel:"noopener noreferrer"}},[t._v("click here"),a("OutboundLink")],1),t._v(".")]),t._m(137),t._m(138),t._m(139),t._m(140),t._m(141),t._m(142),a("ol",{attrs:{start:"4"}},[a("li",[t._v("The dust sensor operates by reading a pulse on the sensor pin over an interval. The "),a("a",{attrs:{href:"https://docs.particle.io/reference/firmware/electron/#pulsein-",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("pulseIn")]),a("OutboundLink")],1),t._v(" function used here waits for the pin to be pulled low by the sensor, waits for it to go high before it stops timing and returns the length of the pulse in microseconds. By adding the following two lines to the start of our "),a("code",[t._v("loop")]),t._v(", we'll measure the duration each time through, and add it up to represent our "),a("code",[t._v("lowPulseOccupancy")]),t._v(" value. Make sure these two lines appear at the very top of "),a("code",[t._v("loop")]),t._v(" outside of the interval check "),a("code",[t._v("if")]),t._v(" statement.")])]),t._m(143),t._m(144),t._m(145),a("ol",{attrs:{start:"6"}},[a("li",[t._v("Add the "),a("code",[t._v("checkDust")]),t._v(" function. The "),a("code",[t._v("lowPulseOccupancy")]),t._v(" will represent the total number of microseconds that a low pulse was read over the 10 second interval, which we can use to calculate the "),a("code",[t._v("ratio")]),t._v(". "),a("code",[t._v("concentration")]),t._v(" is a more complex calculation that we obtained in the "),a("a",{attrs:{href:"http://wiki.seeedstudio.com/Grove-Dust_Sensor/",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation for the sensor"),a("OutboundLink")],1),t._v(". Once we've calculated these two values, we'll reset the "),a("code",[t._v("lowPulseOccupancy")]),t._v(".")])]),t._m(146),t._m(147),a("p",[t._v("Previously, we created variables to hold all of our sensor readings. We can continue to do this, but since the number of measurements we're tracking is starting to add up, we should consider putting the readings into an event that we can fire each time new readings are taken.")]),t._m(148),t._m(149),t._m(150),t._m(151),t._m(152),t._m(153),t._m(154),t._m(155),a("p",[t._v("That's three sensors down and two to go! Let's look at the light sensor next.")]),t._m(156),t._m(157),t._m(158),t._m(159),t._m(160),t._m(161),t._m(162),a("p",[t._v("Once connected, you're ready to start reading from this sensor!")]),t._m(163),t._m(164),t._m(165),t._m(166),t._m(167),t._m(168),t._m(169),t._m(170),t._m(171),t._m(172),t._m(173),t._m(174),t._m(175),t._m(176),a("p",[t._v("One more sensor to go!")]),t._m(177),t._m(178),t._m(179),t._m(180),t._m(181),t._m(182),t._m(183),a("p",[t._v("Once connected, you're ready to start reading from this sensor!")]),t._m(184),t._m(185),t._m(186),t._m(187),t._m(188),t._m(189),t._m(190),t._m(191),t._m(192),t._m(193),t._m(194),t._m(195),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Then, just after the "),a("code",[t._v("Particle.publish")]),t._v(' we added above for "motion_detected", use the '),a("a",{attrs:{href:"https://docs.particle.io/reference/firmware/electron/#time",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Time")]),a("OutboundLink")],1),t._v(" class to set the "),a("code",[t._v("lastMotionTime")]),t._v(" variable.")])]),t._m(196),t._m(197),t._m(198),t._m(199),t._m(200),t._m(201),t._m(202),a("p",[t._v("With that, we've wired up all of our sensors and are posting values to the cloud. You're getting to be a Particle pro now! Let's explore integrating our device with 3rd party services and getting our data into the Azure cloud.")])])},n,!1,null,null,null);s.default=r.exports}}]);