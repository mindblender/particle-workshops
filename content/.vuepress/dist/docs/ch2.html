<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 2: Get your badge to blinky! | Particle Photon Workshop</title>
    <meta name="description" content="Workshops designed to teach the basics of IoT development with the Particle ecosystem &amp; the Particle Photon">
    
    
    <link rel="preload" href="/assets/css/7.styles.78510396.css" as="style"><link rel="preload" href="/assets/js/app.9e5ebf29.js" as="script"><link rel="preload" href="/assets/js/3.d1db485d.js" as="script"><link rel="prefetch" href="/assets/js/0.0577611d.js"><link rel="prefetch" href="/assets/js/1.9e412636.js"><link rel="prefetch" href="/assets/js/2.b9b4ff5c.js"><link rel="prefetch" href="/assets/js/4.4d47b692.js"><link rel="prefetch" href="/assets/js/5.eaab8eea.js"><link rel="prefetch" href="/assets/js/6.cd9cd987.js">
    <link rel="stylesheet" href="/assets/css/7.styles.78510396.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Particle Photon Workshop
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://particle.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Team
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/particle-iot/particle-workshops" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://particle.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Team
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/particle-iot/particle-workshops" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/docs/" class="sidebar-link">About Particle Workshops</a></li><li><a href="/docs/ch1.html" class="sidebar-link">Chapter 1: Claiming your device</a></li><li><a href="/docs/ch2.html" class="active sidebar-link">Chapter 2: Get your badge to blinky!</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/ch2.html#create-a-new-project-in-the-web-ide" class="sidebar-link">Create a new project in the Web IDE</a></li><li class="sidebar-sub-header"><a href="/docs/ch2.html#the-setup-and-loop-functions" class="sidebar-link">The setup() and loop() functions</a></li><li class="sidebar-sub-header"><a href="/docs/ch2.html#controlling-the-badge-leds" class="sidebar-link">Controlling the Badge LEDs</a></li><li class="sidebar-sub-header"><a href="/docs/ch2.html#writing-to-the-display" class="sidebar-link">Writing to the display</a></li></ul></li><li><a href="/docs/ch3.html" class="sidebar-link">Chapter 3: Input and sensor basics</a></li><li><a href="/docs/ch4.html" class="sidebar-link">Chapter 4: Going beyond devices</a></li><li><a href="/docs/extra1.html" class="sidebar-link">Extra: Building apps with Particle</a></li></ul></div><div class="page"><div class="content"><h1 id="chapter-2-get-your-badge-to-blinky"><a href="#chapter-2-get-your-badge-to-blinky" aria-hidden="true" class="header-anchor">#</a> Chapter 2: Get your badge to blinky!</h1><table><thead><tr><th><strong>Project Goal</strong></th><th>Start programming your Photon, badge, and leverage the device cloud.</th></tr></thead><tbody><tr><td><strong>What you’ll learn</strong></td><td>How to interact with LEDs; Using Particle variables and cloud functions.</td></tr><tr><td><strong>Tools you’ll need</strong></td><td>build.particle.io, console.particle.io, the Particle CLI, a Particle Photon and #PartiBadge</td></tr><tr><td><strong>Time needed to complete</strong></td><td>30 minutes</td></tr></tbody></table><p>In this session, we're going to explore the Particle ecosystem via an interactive, Photon-powered conference badge! If you get stuck at any point during this session, <a href="https://go.particle.io/shared_apps/5b58e758236934ba580002c7" target="_blank" rel="noopener noreferrer">click here for the completed, working source<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="create-a-new-project-in-the-web-ide"><a href="#create-a-new-project-in-the-web-ide" aria-hidden="true" class="header-anchor">#</a> Create a new project in the Web IDE</h2><ol><li>Navigate to <a href="http://build.particle.io" target="_blank" rel="noopener noreferrer">build.particle.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. You may need to log-in, if prompted.</li></ol><p><img src="/assets/img/login.612397f2.png" alt></p><ol start="2"><li>Once you log-in, you may be directed to the Particle home page. If so, <a href="https://build.particle.io" target="_blank" rel="noopener noreferrer">click here to navigate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> back to Particle Build.</li></ol><p><img src="/assets/img/particle-home.a4565b9c.png" alt></p><ol start="3"><li>When navigating to the Web IDE (Build), the first thing you'll see is an empty editor window for a new project and a prompt to give that project a name.</li></ol><p><img src="/assets/img/newproject.68e3a433.png" alt></p><ol start="4"><li>In the Current App textbox, give your app the name &quot;BlinkyBadge&quot; and hit enter.</li></ol><p><img src="/assets/img/projectname.027be1b1.png" alt></p><ol start="5"><li>Once you've given your project a name, you're ready to code!</li></ol><p><img src="/assets/img/projectnamed.cafdfc0c.png" alt></p><h2 id="the-setup-and-loop-functions"><a href="#the-setup-and-loop-functions" aria-hidden="true" class="header-anchor">#</a> The <code>setup()</code> and <code>loop()</code> functions</h2><p>Before we dive into our first bit of code, a brief word about the two functions that were auto-populated into your new app. If you've done Arduino or Particle development before, you're already familiar with these and can skip ahead. If not, read on.</p><p>Every Particle application <em>must</em> have two functions in the main file (sometimes called a &quot;sketch&quot;): <code>setup()</code> and <code>loop()</code>. Both of these functions are called by the Particle Device OS.</p><p>True to its name, <code>setup()</code> runs only only once when the device starts up and is used for initializing buttons, sensors and other things needed to get your project ready to execute.</p><p><code>loop()</code>, on the other hand, runs over and over again as long as your firmware is running on the device. When the function is called by the device OS, the code inside executes sequentially until it reaches the closing brace of the function, before being called again.</p><p>While the speed at which the <code>loop()</code> function executes is determined by the specific hardware and the time needed to execute the use code you've written in the function, it's important to know that, much of the time, this function will run very fast.</p><p>The bulk of your program, from state management, handling user input, reading from sensors and more will take place inside of the <code>loop()</code> function. It can take a bit of getting used to if you're not familiar with this style of development, but once you become comfortable, you'll enjoy the power this control provides you as a firmware developer.</p><h2 id="controlling-the-badge-leds"><a href="#controlling-the-badge-leds" aria-hidden="true" class="header-anchor">#</a> Controlling the Badge LEDs</h2><h3 id="lighting-up-the-red-led"><a href="#lighting-up-the-red-led" aria-hidden="true" class="header-anchor">#</a> Lighting up the Red LED</h3><p>Now let's blink some badge LEDs! The first thing we need to do is set the <a href="https://docs.particle.io/reference/firmware/photon/#pinmode-" target="_blank" rel="noopener noreferrer"><code>pinMode</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for our LEDs. On the Photon, every device used in a project, be it a sensor or actuator, is connected to one or more pins on the Photon itself. Sometimes you'll see these referred to as GPIO pins or IO pins, with the &quot;IO&quot; standing for &quot;Input Output.&quot; Every pin can either emit a value (via a voltage from the Photon) or receive a value (via a voltage from a source). When initializing your project, you'll want to denote in <code>setup()</code> any pins that need to function in one of these modes.</p><ol><li>The LEDs on our badge are on pins A0-A4, and all four will be set as <code>OUTPUT</code> pins, which we can specify by adding four <code>pinMode()</code> calls to the <code>setup()</code> function</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>A0<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Yellow</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>A1<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Blue</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>A2<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Green</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>A3<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Red</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>Now that we've configured our LEDs as outputs, let's turn the Red LED on. We'll do this using the <a href="https://docs.particle.io/reference/firmware/photon/#digitalwrite-" target="_blank" rel="noopener noreferrer"><code>digitalWrite()</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> function. <code>digitalWrite()</code> takes two parameters: the pin to set, and whether to set the pin to <code>LOW</code> (or 0 volts) or <code>HIGH</code> (or 3.3v volts, in the case of the Photon). Setting any LED pin to <code>LOW</code> cuts off power to the pin, which turns the LED off. Setting it to <code>HIGH</code> on the other hand, will turn the LED on. Still inside the <code>setup()</code> function, add a single line at the end to turn on our Red LED.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">digitalWrite</span><span class="token punctuation">(</span>A3<span class="token punctuation">,</span> HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>To see your first code in action, we need to install the code on a device. This is often referred to as &quot;flashing firmware&quot;. In the bottom-left corner of the Web IDE, click on the cross-hairs icon to open the devices panel.</li></ol><p><img src="/assets/img/devices.6a952842.png" alt></p><ol start="4"><li>The Devices panel shows a list of all the Particle devices you own, organized by type. Online devices will include a breathing cyan dot next to the name, as well.</li></ol><p><img src="/assets/img/deviceslist.908c0d63.png" alt></p><ol start="5"><li>To choose a device to flash, click the start next to the name of the device you want to flash.</li></ol><p><img src="/assets/img/selecttoflash.e4855d19.png" alt></p><ol start="6"><li>Now, click the flash lightning bolt icon in the top-left to flash the firmware to your device.</li></ol><p><img src="/assets/img/lightning.41572f02.png" alt></p><ol start="7"><li>If everything works, you'll see the red LED light up after your Photon comes online.</li></ol><p><img src="/assets/img/red.4b56931a.gif" alt></p><ol start="8"><li>Now, let's change the code a bit to blink the red LED on and off. Remove the <code>digitalWrite</code> line from <code>setup</code> and add the following to the <code>loop()</code> function.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">digitalWrite</span><span class="token punctuation">(</span>A3<span class="token punctuation">,</span> HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Pause for 1 sec (1,000 ms)</span>
  <span class="token function">digitalWrite</span><span class="token punctuation">(</span>A3<span class="token punctuation">,</span> LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Pause for 1 sec (1,000 ms)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As stated above, the <code>loop</code> function runs very fast. So fast, in fact, that if your loop only contained the two <code>digitalWrite</code> statements to toggle the LED on and off, the red LED would shine dimly and never come fully on or turn fully off. One of the ways we can manage this is with the <code>delay()</code> function, which accepts a value that represents the number of milliseconds to pause before continuing program execution.</p><ol start="9"><li>Flash the new firmware to your device and watch that red LED blink!</li></ol><p><img src="/assets/img/redblink.09f3cad2.gif" alt></p><h3 id="using-a-cloud-function-to-toggle-the-blue-led"><a href="#using-a-cloud-function-to-toggle-the-blue-led" aria-hidden="true" class="header-anchor">#</a> Using a Cloud Function to toggle the blue LED</h3><p>Now that we've mastered using <code>digitalWrite</code> to toggle an LED, let's cloud-enable the blue LED!</p><ol><li>First, let's create some variables to hold the pin references for our LEDs and the state of the blue LED. Sometimes it can be hard to keep track of what sensors and actuators are assigned to which pins on a device, but we can use variables to help.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> yellowLED <span class="token operator">=</span> A0<span class="token punctuation">;</span>
<span class="token keyword">int</span> blueLED <span class="token operator">=</span> A1<span class="token punctuation">;</span>
<span class="token keyword">int</span> greenLED <span class="token operator">=</span> A2<span class="token punctuation">;</span>
<span class="token keyword">int</span> redLED <span class="token operator">=</span> A3<span class="token punctuation">;</span>

<span class="token keyword">bool</span> isBlueOn <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>Once we do this, we'll need to update the <code>pinMode</code> and <code>digitalWrite</code> calls from the last section. Modify your <code>setup</code> and <code>loop</code> to look like the following.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">pinMode</span><span class="token punctuation">(</span>yellowLED<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Yellow</span>
    <span class="token function">pinMode</span><span class="token punctuation">(</span>blueLED<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Blue</span>
    <span class="token function">pinMode</span><span class="token punctuation">(</span>greenLED<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Green</span>
    <span class="token function">pinMode</span><span class="token punctuation">(</span>redLED<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Red</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span>redLED<span class="token punctuation">,</span> HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Pause for 1 sec (1,000 ms)</span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span>redLED<span class="token punctuation">,</span> LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Pause for 1 sec (1,000 ms)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>Now, we're ready to cloud-ify our blue LED. Start by adding a call to <code>Particle.function()</code> in <code>setup</code></li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code>Particle<span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token string">&quot;toggleBlue&quot;</span><span class="token punctuation">,</span> toggleBlue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The first parameter in the call above is the name that the Device Cloud API will use to track and execute the function. The name has to be less than 12 characters, so you'll want these to be short, yet descriptive. The second parameter is the name of the firmware function to call when this function is executed from the cloud. These names do not need to match.</p><ol start="4"><li>Once we've declared the function, we'll need to define the <code>toggleBlue</code> handler. Add the following before your <code>setup()</code> function:</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">toggleBlue</span><span class="token punctuation">(</span>String command<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isBlueOn<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span>blueLED<span class="token punctuation">,</span> LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span>
  <span class="token punctuation">{</span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span>blueLED<span class="token punctuation">,</span> HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  isBlueOn <span class="token operator">=</span> <span class="token operator">!</span>isBlueOn<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Paticle.function()</code> Handlers must follow a precise function signature that returns an int and takes a single <code>String</code>, which can be used to pass additional information along with the function call. We don't need this parameter at the moment, but we still need to include it in the signature.</p><p>In the handler, we're checking the value of the <code>isBlueOn</code> variable to determine if the light is on. If it is, we turn it off, otherwise, we turn it on. Then, we set <code>isBlueOn</code> to reflect the change and return a <code>1</code> to indicate success.</p><ol start="5"><li>Flash the new firmware to your device. When your photon is breathing cyan again, head over to <a href="https://console.particle.io" target="_blank" rel="noopener noreferrer">console.particle.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and select your device to view its dashboard.</li></ol><p><img src="/assets/img/dashboard.46a5a526.png" alt></p><ol start="6"><li>On the right-hand side, you'll see your function under the &quot;Functions&quot; heading.</li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbsAAACOCAIAAAAnyzHjAAABgWlDQ1BIRCA3MDktQQAAKJGVjj9rWmEUh59XTUxRqARpHUp5IaV0uAZjB6vJ4h+ohgxiW1C36/VGA1d9ub5i8gGyZUmG0C4tbb9CSZYMGUOGZAgUCtLPUBACpYTb4ZI6hdDf9JwHzjk/CGhTKScE9Prarb0uyHqjKcMTIkRZJMdj0xqqfLW6wZ25/o4AuEqaSjmbld8/1nbHn77Nr394mtPG3XsARNr20AKxAFjtodUD4QCGpVwN4j2QHGulQZwBcbfeaIKYAPGOz7+AeKveaEIgBMTdt7UiBBJArOXzCyDW8fkVELO6ZhsCZcDwOwDwoFySmVQ2mb+n93+n54xufwggavffvQFiwBPKlJBkSJElSV7b2xqgOFA77lanq2VeKceWxUFPjbTtGrLSt5YNmU6tpADqjab0T09rCEA8upy5wWfILkFwb+Zah3B8AonzmXv2ER6uwtGFMl3zX3FxHbpvHm6+TPscLcDcT8+bPofwAdzse96fL5538xWCEzh1/gIkd2ngdRvKIgAAAAlwSFlzAAALEwAACxMBAJqcGAAABjJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDQzIiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMTQyIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNy0yNVQxMjowNzozNS0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDctMjVUMTI6MDk6MzYtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDctMjVUMTI6MDk6MzYtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0iSEQgNzA5LUEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NGExNjI1YWQtMmFiZi00ZjA1LWFiZTUtOTRiNjgxZmZkODFiIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NDkwMWJkYTItZjBlZC1iOTQ1LWIyOWUtNmEzMWM4MDU1MDMwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MGUwY2U1YjctMjNmZS00NTNiLWJjOTctNThmMWI1ZWQ4ZTA2Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGUwY2U1YjctMjNmZS00NTNiLWJjOTctNThmMWI1ZWQ4ZTA2IiBzdEV2dDp3aGVuPSIyMDE4LTA3LTI1VDEyOjA5OjM2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NGExNjI1YWQtMmFiZi00ZjA1LWFiZTUtOTRiNjgxZmZkODFiIiBzdEV2dDp3aGVuPSIyMDE4LTA3LTI1VDEyOjA5OjM2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5y9y+DAAAZlElEQVR4nO3dfVRU54E/8K8Mzs0gw4sMQRgjAjEdgh2idaiWg0ZDquK2UTQEk1jsKcbs8mOzQn+V1Z51zFYOniykW5auVbrRUC1JFU2yYkx8iRKMQoqOgToGGcWfoETeB8E7MvD7YwCHN3OJ0wGS7+ck58zc+7xBDt88z33m3pnQ3d0NIiKSwGW0B0BENG4wMYmIpGJiEhFJxcQkIpKKiUlEJBUTk4hIKiYmEZFUTEwiIqmYmEREUjExiYikYmISEUnFxCQikoqJSUQkFROTiEgqJiYRkVRMTCIiqcZZYortotksig5qSmx/iJbEh6tOROOQgxJTNCZpB0nIFwFALEjWarVJxvb+hZMLbHkjXsnXarVard7UW8B2JGmfyb6Hms/y1zyr1c3VRUbqdNpF6QdKbNVN+4boWbux0P5sfoV9tIklB7IXabW6uTrdXJ322aSCz2rszxYka7VabdoBU/8jduNvr9mzMU6r0+nm6rTaRfrdx+ofmJxtbW3l5eVnzpz59NNPjUZjW1ub9N8rEY0pDptjtg5xTG53rlUcULjOYulXuGD5xoJ+ZezOG3YnLV2fbqjrO1CfvzUx5YMaABbLUD2X3bZvXETfO3NBsi5x6656AFABQF2Rfv3SpAN26dwKAIVbl9/P2f7jL9y6NPOIEVBp/ADUF2Sl7CyrH2IMAIDGxsaysjKz2axSqby9vb/66qvz58+3tLQMV56IxjJXRzXkAQDhecV54W5DFxAGFFb0BWqvU/rEfU/mvagZWLP22JqsIgCxW/L+dWW4ANF06u0theqsn6gBaFbnlsZBkJn3vLIo83x47olc2wCEga0AQM2pbP0pABp97puxEWpYzSV52xKzCou2Li+cVxoT0K9S+uqU0LM54W49cdtzTjSdPgJAlfXhiegAmK8X7T6BV+aphvyRu7q6Ll265O7urtVqXV1dAXR2dhoMhvLy8nnz5rm4jLNLIkTk2D9asea6qea6yXTdZLpqevBadUiGjLg9FaIg75elpk/2AMCCDP3KcAEAhOAF6/K2x/REmCAIbgIEpRIA4OEmCG6C4DZkYIrn/icfQNS2jNgINQDIlBFrt26aBQCnDYPniUVr/jFfRP9kF3xD/ADUp/xL0p4Pim67RSSvjRqyMwD19fWdnZ2PP/64LS4BuLq6BgUFdXZ2Njc3f/2vg4jGGMcmpjFt9fKlzy1f/tzy5bHL/3zFPEyxgZNLAFiQmrMlBkDm6i3HKgdU9AAQPm/Q3HPkbLPFqFC13TEhYnEUAFNdv05Ts7NiAZxPT9lXZJlif0a5YtsmFQBjUebmpOWLdNq4dEPz0N11dHQAmDRpUt+R5ubmyspKAJcuXTKZTENXI6KxyrGJqYpNSk1NSU1NSU1O2vTsNNu0z5ZThr/V9c45zTWXAHSg33XMVmXEyq0ZCwAUpmzIHNy0wWB8+PHZovrCJfvppGj8rAiAr7L/VHJatP49PYCijJT0I/0aUUXEn7hYeuhPuZuSYlUAjPkbdpQM2Z1CoQBw586dviNeXl6PPfYYADc3t+nTpz/sz0NEzuXYxAz9WWJCwtqEhLUJ69bHa7x6jnp4AMDBjwy2yDR8dNiWWP0iqsMCCDH/cShmUKPqec8AwJG07OM9k7L6isKkjfn11pEOT3hqVRSAws1phRW2IYimIzvTTgFQrVgQbF9UbDcjKPbQtsHDgfGAPv2Dq2ptRPx6/Xu5yQDqy0xDXoFQqVSurq5Xrlzp7Oy0Henq6goICJgxY0ZYWBivYxKNOw7b+WkFgFaLCAzc+RGi1qXiVKYhJ1GXo9H4GY11AJD8y2VDXP4Tgrf+b0bhP6T1OxYUm5t0MDHHsGvD8l1+Gg16WtgQEZG3MnhwGw8Q/JOMTfsj088b0lYvSvPTaOqMtolrVNrvo3s3byz9ym/NKCtJO2A3J71eGLe1ACjI36wKn6U2nDcAiHohYshLmS4uLqGhoeXl5aWlpT4+Pp2dnY2NjWq1OigoaETDJqIxwlHTHLka6NkwH0SpTTjyh00aAD1hF77pD0fWRfSs2SGTA4Ci550wLebIm+uAflPQiPV5725P1gCos7WgSd5+aKi4HHoAdnGmjN9TnJMWr7I1BcAvSp97JMdug942I+6tIsT8Om+dxq7laTHF7+XEL9AA9ba4jEnKyhg+uCdPnjx79mylUllfX9/c3Ozl5fXoo48OV5iIxrgJ3d3dTuvMdpPMMBvZUluwWKFUfvMWHDYYURStgCAIsocfCxGND05NTCKicY2bD0REUjExiYikYmISEUnFxCQikoqJSUQkFROTiEgqJiYRkVRMTCIiqZiYRERSMTGJiKRiYhIRScXEJCKSymHPxzSbzdXV1U1NTV1dXY5qk4jo78HFxcXb2zswMFCpVH59aTuOeXaR2Wy+cOFCSEiIn5+fTMbHnxHRmGa1Wuvq6qqqqp566qkRhaZjErO8vHzy5MkBAQEP3xQRkXPU1tY2NjbOnDlTehXHXMdsamry8/NzSFNERM7h5+fX1NQ0oiqOScyuri4uxolofJHJZCPdd+FeORGRVExMIiKpmJhERFIxMYmIpGJiEhFJxcQkIpKKiUlEJBUTk4hIqlFKzPZ7o9MvAQDa29vNZvNoj4Jo/HHYs4skultl/j/n7v2xGwAOz1XGhEwcupxVNDdZlKqRPVbkGzDtW7M8A3ln88LdHlSs/mLh4fJWpSAHANECwcN3RniUVm07K17J18Wmp/65OCHs7z7gAcy1pgt/LblQYfKdlxC/QP2Aki0tLY2NjQCmTp168eJFFxeXmTNnNjQ0dHZ2enh4+Pj4OGvIROOYkxOzI+fsvT9iwt5prh2tXaH+w8QlIBrzI1dnpv65NCFMcMKwvraP+rI/Z2YZBh5dmlG8PcbZGdnHWpO9ZOmuup53mimx8QseVLy6utrDw8PLy6upqclisbi4uDQ0NHh5ebW2tlZVVTExiaRw7qq8yvJL4DchihejlL9Y5hk0/LROcFMCEJyRlpLI5SL8Uosv9jp7RL9UhSNph6+IozYmmSpEc//d1/6quru7p0yZIpfLL1++3N3dbbVaTSaT1WpVq9UOeX4V0XeB8xLzVnHz7HNWAL+u6liZ37StqH3Yos0lcc/pAezclLgmbpH+gMl2uP5iYVqc1iYpo8Bk14BYW5Kd3HMu6XfHaq4eW/Osvq9ATUlh0rO2k4uyjxtNp3bFbSwcMurMV471drEo7Q9F/S/12dbkAAA3deyrrwAQ2y0DWhCvFsZp4wqv9jUvFm6NS/vA1NfDsT+k9XQQl3bs6pAXE8Wi3fq0rXq93T9pG3eZBo5YCH9Rr9+eETVUE8ORy+U6ne6HvSZNmjSS2kTfdU5blVtvivDvxnlM2Ow1AfcwL2D4JXmr+OQsjfG8UeUXEqoOCQ4QANQcT1+6IR+ISt22TLh6OD1XX7Tv+LtnczRuQH3JmiWJRiA2KTVIaC3Zm7I0F0C4LczqP8teun4XEJ6cEi0Xr+7ZELcLwKxNlkHzMvFKQWSsHojSv7kCpXv0OUmFtzJKt8T0FhP7qojtNYff3gloQoMGLcqtrUYYb7ffb761wlgSaBuLuSA5Un8KUYn6FWGWPRvSU54rzHivNCZo4ATRfOlvJWVQed8/Ymy6u9Y6sCv1vNhYiMhH0fnhfpcD1dX1LOMDAgImTJggtRoRAXBiYspmLZKH7r1702fib5a4P7ioMC1Kr79d8Jw+9rV/jX9cAADRlL4hH7M2ndgTrwKAmGXPFESu1v9TbsmJf44wHPgPI5Dxv6Ux0wQACWtX70lYlNkTIubDb+4CYg+V6oMFAEh4ISZpfmJRB+QDuxUP/rsefutOfJysAvBM9FNhacs3pxUlxUSrAPiiLjNSm2lfQZPy+whpVzFVtg6uHNafwrrsE8kLVACiz0ekzVqe9nZJzJYB00QhZvu7MZIaHrG+BXhNTQ0AhULBK5hE0jlv5+eu8V4m8F9Thp1a2hOtFgBi76xO/H8lRcC6pGWq3gLKsGeT/fTZn14y/3PopeNGaFKjpvXN1FTxv0rOXP0xALSbDhuhSVkR3HfSKyI5SVO0f1CX7VcPnwdQc/qDQljuQv6IucwE4GqtGSol0AqE699M8AAAWNrrT+/fWZgVl+53aNPSYIm/gZqSIgBG4+nCetwFHpGbTQAqTGZEDQje+uum1gEzSqugDlILD/0MUlfX+//FPT09FQrFw7ZI9F3ivMS8eqMLmPCj4G++m/PII4OPCYBSHabCgZLb1gRlb6BcLf24Z1EsqJ4C8k9WiWvDezs2nztuhPfgpgAAmpqST0/bigFPxi59Mkhpm4yK0MQueya6b/QxP1kWGheZmVWUvDS433RVtA1r0BQWAFoBtJaXnHYDAHM7nnwx9kk39aCi5oP/sDx7UOXcsxcjHvgRKCm8vLz6XtunJxFJ4bS/GfFMfTfkslAPicUBQOjdaxECQjVA9t6in2l7ryrWX/q4DpitUgKhT0fjQH7ipj2/fy02SCkaPtmZmGUEwgFApo56UZW/T79lt0fyyigPa03RjrRMIzBrUI9u6mg/GBC9eXtC74xPNLcLyr6QGvhw+9bWJgxOXkEdrAIOG2riw4IBwGw4bIQQAwDq8GjAMH/d5nXanh7EZrPgNXhhr4w/cSTGfmPMFeiE6qHjEkBLS8v9Vl1duSQnGhFnJWbDvQIrfvGo6xDTxKEIQaEaIP3fd6p+FtLqGh67IHxzSviarDTdrQs5ScuEhgtpGzProcn5v9EAVAs25aa0JmZlxh2xXWcMT02JzcyqsjUVlfbuppq49KyUwiwAwKz41JX1mRX9uhMBQLns9XWZ6zMjE2pyUuPVML39m5QCY/ih0rxgAYCAusP5++QCLABguX04a5cBCH/pKWVP9V5KVQRQmLFcj6wYtWVPcpoBCJcDgKCJTvbLzH458vaWnPjZvqbP8lMyCsK3HMpbOXBdr1SppX/Mc+Bu/QPdu9dzt5VSqfT09BxJVSJyVmLerbUWAgceG3KtOhQ3zSuJ4Sm5u1LOIzztUCwQvjY3z2fnhs27khLzAUATn/vb1Ije65oRazMuxv3SdKXGDKVGG3x19xpA7A0yVXz2iRX1NVdr60U3VfjjHvlx+fc3vgUPALblvGpe8pFsjw3JmUkv5wMAorIKMnqvIngARZkZ9z/ErtJEbVqfGv9MMADI5AB67giSBW8tyDDFphVkpBQAMSkZ6wrTimypJlOve++QfGta5takng6SsjKWS70MOhwP27Rdwq+2q6tr6tSpgw8+5ACIvjsc8+27p06dWrDggXecfDOiKAKC/QfZraItCAU3u4O1xxYt2fnKm5ujIzRKmcV4PHvN5nzM0pfuiRWAmuP6pRnI+u26Hwap5Jb64zvS0vYZorYcyhk0s7vfrdlsgVypfKgP0Itms0UmV7oN1Ygomi0WuVzpzI/oV1dX37p1a8hT3t7eTzzxhPOGQjRmjDS7xva1f2FQpMgEYfDlPDff+Rpj+oY16X1HZiUf+u9YW13BV6up06esLug7GZWYlTF8XAIQHjIsv7YRQXBqWAIAAgMDAwMDndwp0bfM2J5jjoTYXFPTJMIKuPkGBwy8DGiurbndLgIQ/NRqB+QhEX0bfLvmmCMheKmDvYY9qwwYwV4KEdGQ+ERhIiKpmJhERFIxMYmIpGJiEhFJxcQkIpKKiUlEJBUTk4hIKiYmEZFUTEwiIqmYmEREUjExiYikYmISEUnlvCdxmM3m6urqpqYmPsKWaNx5+sb3R3sIIyCXYcmUif+mVfxgsoMjzkmJaTabL1y4EBISEhoaKpM99DciEpGT7W1sjx033zza1ol91zt/9FHrmR97ODY0nZSY1dXVISEhAQEBzumOiL7L3F3xSrArgNcvdrz3tCMf9Oik65hNTU1+fn7O6YuICMCL01w/vHXPsW06KTG7urq4GCciZ3J3hcXq4Da5V05EJBUTk4hIKiYmEZFUTEwiIqmYmEREUo2NxGy6mLd7d96HxtEex9ew3Lp49OOLltEeBtG4YLl5+f0/vbXj9zve+tPRa839/27Ml/f/8a2jf22wP9ZQfnL/uydrB/yBNXzx/p/e/6JhrPzZjYnvK6/8vNwK4Jah8o5mxqTRHs0D3PnqZs1oj4FoPKj9ZMeKjW/1vd2RjdcPFC2eKre9/eK9bW/svAyIc8696tNbpv7CW29kI/cnC+1vdLF8dXFb9u9e/cHC7/vInTX2BxkDiWmpLK2x+GrCLMaK0r9Wz5gf2HP4WvE7Z9vmPx1o+Ohsi3/kmmdntF0r/fhsRctdwMUzbG7IjbJr4bE/DZZ3nN2/v2VG9OJw/55ap7+KXLkieGL1wb8Ue4UENnxZ2dYFuW/YsqhHzxaevHkXmOg5++klWrUCACw3iz88WdloATA5eO6y+RoZUF18sLjBZ4Z7Q8X1FkDmHzZ/sS6w41rxO0U3ALyzdzeEGatWRY6bW8aInKz588SNb+HRxTk7fz3HX26uOrr3M5+FvXEJy7W/ZF8GALz1YflLL83suSdHkMsBDMxFuTDEwdEz+qvyG6VlFnhGzNXpghUWU9mN3k+cWq0W692bJz882yj3DJ7qZb1Vuv+TihaZvy5qvu4Jt4ozZS1326z3AKBDtN682dJbq8Pa1WYBcM9iuWepNlb6PKmbHTzZcrviYMHJBqVm7hyN4l5L2fHiNgBoOfaXo5WNirCohXPD/BtNZ/efNgGwihZLo6miQan7oW6qO25WnCyusSgCntBMkQPuM74Xppnhz4/jEw3HXPVFA7DqV6/N8ZcDUIYsfvXlOX2pV3tm71Hg9d25Pwd+t/vMWFlvSzPqc8wbpZUdnmHzfQFEzlWYTpaevz11jm/faZnv7BeXaWVA5ccfApOXPb/YF0BIcPDkY++cuXm/2P0bimQ9/06EFfAMW7xwjj+gMdflVVqmrlg2VwEEylreOXfz5h1MvVV24x7Clq3Q+QIhgXJz3ulrpo75wYAVmLz4+Wh/IOwJRV7e6Y47Fqh9dRp/4y3r7Dm6sfN/PKIxyGyuBxCgGvKGbvPRzPeBH/kofcQooOg/ixsWL/QZquCYNMqJ2WIwtAC4cfFYw0XIOi1Ax9/KWuYs9uwtMDtKe382N1HZd1zh7QncfPAdUFZAOdkLACDz95JVWqb2rKPl/RKv4vDuivvvvrphgQxWTFTaakL2qL8LbB1ZrFZbs0T0AKrHggDsPVT8fOhCOQCYr13D9OlKAJaqozu+AnAmaeUKAEDDW4c+X/iLOX11haHmI4Jc+PuPWpLRTcyWs4bbmKjwhLm5DQDc3RUtbTdLv2yLfsIdACCT9+alu5c7aqpLq1oiQzyBjtISI2B/p3rvS2v/QOt9a0X/4nZmPL1qri86IJPBaoVMIUc17HNRJrN/5wKux4keTB6yeHPUG9sOpUVdXbU5JujzA28c/dK284OTu98Avp+x+9ffUwCu4tHXf7Zj595ra+ZMlwNQAmf+57c7AhQAzGaPyNde/pGtwfd3/6fZXykC5g7VS8mrAkZvlTeaidnxZdnNLoQtfUF3fxVuLf5LXmVZWccT8wcU9tctCr52sLLoYGUx0AVM7AsuuUKAtab07JeKEPntj8/ckHiZ2Aoops/wLKquLD3rHx3pj4bST45VK3RrloQNLnn/VdeNsi+r/eVuU6f7MjqJhqH86fZC4be/+bd3928zAPBZpd++cKoczZ/v/QjfS3h1Yeh0W7lV61/d8U879n5Su/nHPTvkR9/t3WGP0r72cs/Lyx/tv9zzcvHzyauc9mMMNoqJaTEYquGuCfe1PyibPTuwsshkuDU3HEC/+Zzn/OfXhl4zXrttdvMNDbSW7i+y7RLJdAt0Nw6XGs8cNQKekxWWxp6m7CsPSjeZbCIgm/rTZXPf/+js6ffeAYCJnrp5wQDgKkP/6astNBVTAj1dbhjPnDS6BL4wfSH3yomGJfNZnPrm4n+xWCyAXN6zWPSa8/a5c/allD/4+blzP7e9nh735rm4Qe2ErDp3bjQjcoAJ3d3dD9/KqVOnFixY8DAFvpb1dmneYWPgzLmakEetty4VnzN2PBL8Qvz83tiydtzpwER3xTearlvudFgA90mSMtBqsUAu5wSTvlMmjKtnsPdxK+jofmnyAwqMNJpGfa9cKpnn9LBpNyvKi6vLAUAxecbiJfafiJQpJrl/48blk0aQtDI5t8qJvqPGTWJC7qtb9FPdaI+CiL7LRv8T7ERE4wUTk4hIKiclpouLi9XKj34TkfO0dcLhW7ROSkxvb++6ujrn9EVEBGDf9c4lUyY6tk0n7fwEBgaWlZUB8PPz45dKEtHfVVsn9l3v/NUX98782MOxLTspMZVK5ezZs6urq6uqqrq6upzTKRE5zvfdCjpGewxSyWVYMmXimR97/GCygyPOeZ8uUiqVM2fOdFp3RORADrjR5VuBe+VERFIxMYmIpGJiEhFJxcQkIpKKiUlEJBUTk4hIKsckJm+CJKJxx2q1uriMLAMdk5i8CZKIxp26ujpvb+8RVXFMYgYGBlZVVdXW1nKmSURjn9Vqra2traqqCgwMHFFFx3xrBQCz2VxdXd3U1MSbIIlojHNxcfH29g4MDFQqh/xS9WE5LDGJiL71uFdORCQVE5OISComJhGRVExMIiKpmJhERFIxMYmIpGJiEhFJxcQkIpKKiUlEJBUTk4hIKiYmEZFUTEwiIqmYmEREUjExiYikYmISEUnFxCQikoqJSUQkFROTiEgqJiYRkVRMTCIiqf4/Bjbvj35DLRkAAAAASUVORK5CYII=" alt></p><ol start="7"><li>Click the &quot;Call&quot; button and marvel as your blue LED lights up.</li></ol><p><img src="/assets/img/blueOn.6934a85c.jpg" alt></p><ol start="8"><li>To turn the LED off, click &quot;Call&quot; again.</li></ol><p><img src="/assets/img/blueOff.f88e16ac.jpg" alt></p><h3 id="using-a-cloud-event-to-toggle-the-green-led"><a href="#using-a-cloud-event-to-toggle-the-green-led" aria-hidden="true" class="header-anchor">#</a> Using a Cloud Event to toggle the Green LED</h3><p>Before we move on from LED-blinkery, let's take a look at using Cloud variables and events to toggle the green LED.</p><ol><li>First, we'll need a status variable for the green LED. Add the following line under <code>isBlueOn</code>:</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">bool</span> isGreenOn <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>Next, declare a cloud variable for the state of the green LED, right after the <code>Particle.function()</code> call for the blue LED:</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code>Particle<span class="token punctuation">.</span><span class="token function">variable</span><span class="token punctuation">(</span><span class="token string">&quot;greenOn&quot;</span><span class="token punctuation">,</span> isGreenOn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Just as with declaring a function, <code>Particle.variable()</code> expects a name (12 character max) for the Device cloud to use to track the variable, and a local variable. Variables must be of type <code>INT</code><code>DOUBLE</code>, <code>STRING</code>, or <code>BOOLEAN</code>.</p><ol start="3"><li><p>To check your progress thus far, flash the firmware to your device and head back over to the console. You should see your variable listed underneath the function on your device dashboard.</p></li><li><p>Click on the &quot;Get&quot; button. Since the value is false, nothing will be returned. We need to add some more code to get it to true.</p></li></ol><p><img src="/assets/img/greenOn.d4dab208.png" alt></p><ol start="5"><li>Now we can implement the code to toggle the green LED. Since it will end up looking a lot like the code for toggling the blue LED, lets add a helper function that takes the boolean and the pin of the LED we want to toggle.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">toggle</span><span class="token punctuation">(</span><span class="token keyword">bool</span> isOn<span class="token punctuation">,</span> <span class="token keyword">int</span> led<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isOn<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token function">digitalWrite</span><span class="token punctuation">(</span>led<span class="token punctuation">,</span> LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span>
  <span class="token punctuation">{</span>
      <span class="token function">digitalWrite</span><span class="token punctuation">(</span>led<span class="token punctuation">,</span> HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li>With a helper function in hand, let's add a function to toggle the green LED and refactor our existing <code>toggleBlue</code> function.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">toggleGreen</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>event<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token function">toggle</span><span class="token punctuation">(</span>isGreenOn<span class="token punctuation">,</span> greenLED<span class="token punctuation">)</span><span class="token punctuation">;</span>

  isGreenOn <span class="token operator">=</span> <span class="token operator">!</span>isGreenOn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">toggleBlue</span><span class="token punctuation">(</span>String command<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token function">toggle</span><span class="token punctuation">(</span>isBlueOn<span class="token punctuation">,</span> blueLED<span class="token punctuation">)</span><span class="token punctuation">;</span>

  isBlueOn <span class="token operator">=</span> <span class="token operator">!</span>isBlueOn<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Like <code>Particle.function()</code>, <code>Particle.subscribe()</code> requires a specific function signature that returns <code>void</code> and takes two parameters that contain the <code>event</code> name and any <code>data</code> passed in the payload.</p><ol start="7"><li>We have a function to toggle the Green LED, now we need a way to call it! Add the following to the end of your <code>setup</code> function:</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code>Particle<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;toggleGreen&quot;</span><span class="token punctuation">,</span> toggleGreen<span class="token punctuation">,</span> MY_DEVICES<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="8"><li>Flash the latest firmware to your device and head back to the console. Just under the Event Logs, you should see a button that reads &quot;Publish Event.&quot; Click that button and the UI should expand to allow you to enter a name and optional event data. In the &quot;Event name&quot; input, type <code>toggleGreen</code>, and leave the &quot;Event data&quot; field blank. Click &quot;Publish&quot; and your badge's green LED should light up.</li></ol><p><img src="/assets/img/publish.ab92273f.png" alt></p><p><img src="/assets/img/greenLEDon.d304b024.jpg" alt></p><ol start="9"><li>If you click the &quot;Get&quot; button on the &quot;greenOn&quot; variable again, it will now return true.</li></ol><p><img src="/assets/img/getGreenOn.73a4144d.png" alt></p><ol start="10"><li>Click &quot;Publish&quot; again and the LED will turn off.</li></ol><p><img src="/assets/img/greenLEDoff.ed46c0cc.jpg" alt></p><h2 id="writing-to-the-display"><a href="#writing-to-the-display" aria-hidden="true" class="header-anchor">#</a> Writing to the display</h2><p>Now that you're an LED master, let's write some text to that fancy OLED display on your badge! You'll start by installing a firmware library for the screen and writing some text. Then, you'll set up a cloud function for your name and display it on the screen!</p><ol><li>In the Web IDE, look for the libraries icon in the right navigation. It looks like a bookmark.</li></ol><p><img src="/assets/img/libraries.6555812e.png" alt></p><ol start="2"><li>In the slide-out window, you'll see a list of popular official and community libraries, and a search box.</li></ol><p><img src="/assets/img/librariessidebar.90c2c38a.png" alt></p><ol start="3"><li>Type &quot;SSD1306&quot; in the search input, which corresponds to the type of OLED screen on your badge.</li></ol><p><img src="/assets/img/librariessearch.4de026a8.png" alt></p><ol start="4"><li>Click on the &quot;Adafruit_SSD1306&quot; entry and you'll navigate to the files for that library, where you can view the source and check out the included examples.</li></ol><p><img src="/assets/img/libraryscreen.6905bf08.png" alt></p><ol start="5"><li>Click &quot;Include in Project&quot; and you'll be asked to choose an app. Select the &quot;BlinkyBadge&quot; app (or the name you chose, if different).</li></ol><p><img src="/assets/img/whichapp.3dcc9c19.png" alt></p><ol start="6"><li>Click &quot;Confirm&quot;.</li></ol><p><img src="/assets/img/confirm.d680846e.png" alt></p><ol start="7"><li>The library will be included in your app, which you'll see in the sidebar. Also notice that an <code>#include</code> statement was added for the header file for the library.</li></ol><p><img src="/assets/img/libraryadded.04752642.png" alt></p><ol start="8"><li>Once we have the library included, we need to add a global variable to our app to reference it. Add the following near the top of your project, outside of the functions.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code>Adafruit_SSD1306 <span class="token function">display</span><span class="token punctuation">(</span>RESET<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="9"><li>Next, you'll want to initialize the display. Add the following to the beginning of your <code>setup</code> function.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code>display<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>SSD1306_SWITCHCAPVCC<span class="token punctuation">,</span> <span class="token number">0x3C</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
display<span class="token punctuation">.</span><span class="token function">clearDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
display<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>begin</code> call takes a couple of parameters. The first instructs the display to use the 3.3 volt line for power, and the second is the hexadecimal <a href="https://en.wikipedia.org/wiki/I%C2%B2C" target="_blank" rel="noopener noreferrer">I2C<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> address of the display. We'll talk more about I2C in the next session.</p><p>After initializing the display, we'll clear it.</p><ol start="10"><li>The Adafruit library for this display provides a number of convenience functions that make it simple to write text and even manipulate pixels to draw images or animations. Let's start by writing our name on the display. Add the following to the bottom of the <code>setup</code> function:</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code>display<span class="token punctuation">.</span><span class="token function">clearDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
display<span class="token punctuation">.</span><span class="token function">setTextWrap</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
display<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">;</span>
display<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
display<span class="token punctuation">.</span><span class="token function">setCursor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
display<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Brandon Satrom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Replace with your name.</span>
display<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Flush everything to the screen</span>
</code></pre></div><p>The first thing to do is clear the display. Then, calling the <code>setTextWrap</code> function will let the display know that it should wrap text to the next line, instead of cutting it off. We'll set the size, position the cursor at the top left of the display and then call <code>println</code> to display a name on the screen. Finally, calling <code>display()</code> flushes all pending changes to the screen.</p><ol start="11"><li>Now, when you flash the firmware to your device, you'll see your name pop up on the screen. Or mine, if you didn't change the default.</li></ol><p><img src="/assets/img/nameonscreen.b3b0e90f.jpg" alt></p><ol start="12"><li>That's pretty cool, but what if we don't want to hard code our names to our badges? We can use a cloud function to set a name and display it to the screen! First, let's create a new <code>Particle.function()</code>.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code>Particle<span class="token punctuation">.</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token string">&quot;displayName&quot;</span><span class="token punctuation">,</span> displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="13"><li>And for the <code>displayName</code> function, move the code you added to <code>setup</code> for displaying your name.</li></ol><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">displayName</span><span class="token punctuation">(</span>String command<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  display<span class="token punctuation">.</span><span class="token function">clearDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  display<span class="token punctuation">.</span><span class="token function">setTextWrap</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  display<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  display<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  display<span class="token punctuation">.</span><span class="token function">setCursor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  display<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">;</span>
  display<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This time, we'll write whatever is passed into the <code>displayName</code> function to the screen.</p><ol start="14"><li>Flash the latest firmware and head back to your device in the console. You should see a <code>displayName</code> function.</li></ol><p><img src="/assets/img/displayName.11eeaf29.png" alt></p><ol start="15"><li>Enter a value and hit the &quot;Call&quot; button to see your name displayed on the screen.</li></ol><p><img src="/assets/img/cutler.d0e3f268.jpg" alt></p><h3 id="bonus-command-your-badge-from-the-particle-mobile-app"><a href="#bonus-command-your-badge-from-the-particle-mobile-app" aria-hidden="true" class="header-anchor">#</a> BONUS: Command your badge from the Particle mobile app!</h3><p>So far, we've used the Console to interact with Particle functions and variables, but you can do the same with the Particle iOS and Android apps!</p><ol><li><p>Open your mobile app and login.</p></li><li><p>In the device list, select the device powering your badge.</p></li></ol><p><img src="/assets/img/mobile-list.bbe479ac.png" alt></p><ol start="3"><li>On the device inspector screen, click on the &quot;Data&quot; tab.</li></ol><p><img src="/assets/img/mobile-inspector.c8db3862.png" alt></p><ol start="4"><li>From here, you can inspect variables and call functions, just like you can from the console. Try updating your name and toggling the blue LED from here, as well!</li></ol><p><img src="/assets/img/mobile-data.446fa52f.png" alt></p><p>You're getting to be a Particle pro now! Let's level up and explore more of the features of your badge and the Particle ecosystem.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/particle-iot/particle-workshops/edit/master/docs/ch2.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs/ch1.html" class="prev">
          Chapter 1: Claiming your device
        </a></span><span class="next"><a href="/docs/ch3.html">
          Chapter 3: Input and sensor basics
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/3.d1db485d.js" defer></script><script src="/assets/js/app.9e5ebf29.js" defer></script>
  </body>
</html>
